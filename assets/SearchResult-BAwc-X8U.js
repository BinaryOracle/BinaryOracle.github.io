import{g as K,u as W,h as X,i as Z,j as ee,t as ae,k as se,l as b,m as f,n as e,p as le,w as te,s as re,R as F,q as ie,v as oe,x as ue,y as ce,z as ne,A as I,B as _,C as de,D as ve,E as he,F as me,L as Ee,G as ye,H as pe,I as Ae,J as $,K as ge,M as H}from"./app-D4j_fHns.js";const Le=["/","/intro.html","/3DVL/Grounding_3D_Object_Affordance.html","/3DVL/LASO.html","/3DVL/","/3DVL/%E7%AE%80%E6%9E%90PointNet__.html","/3DVL/%E7%AE%80%E6%9E%90PointNet.html","/LLM/","/LLM/%E5%9B%BE%E8%A7%A3BERT.html","/LLM/%E5%9B%BE%E8%A7%A3Transformer.html","/LLM/%E7%AE%80%E6%9E%90LLaMA.html","/MMLLM/","/MMLLM/%E5%A4%9A%E6%A8%A1%E6%80%81%E6%A8%A1%E5%9E%8BCLIP%E5%8E%9F%E7%90%86%E4%B8%8E%E5%9B%BE%E7%89%87%E5%88%86%E7%B1%BB%EF%BC%8C%E6%96%87%E5%AD%97%E6%90%9C%E7%B4%A2%E5%9B%BE%E5%83%8F%E5%AE%9E%E6%88%98%E6%BC%94%E7%BB%83.html","/MMLLM/%E5%BA%96%E4%B8%81%E8%A7%A3%E7%89%9BBLIP2.html","/MMLLM/%E5%BA%96%E4%B8%81%E8%A7%A3%E7%89%9BVIT.html","/open_projects/","/other/","/404.html","/category/","/category/3d-vl/","/category/3d-affordance/","/category/nlp/","/category/mmllm/","/tag/","/tag/3d-vl/","/tag/3d-affordance/","/tag/%E7%BC%96%E8%BE%91%E4%B8%AD/","/tag/point-cloud/","/tag/%E5%B7%B2%E5%8F%91%E5%B8%83/","/tag/%E9%A2%84%E8%AE%AD%E7%BB%83%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/","/tag/%E5%A4%9A%E6%A8%A1%E6%80%81/","/article/","/star/","/timeline/"],Be="SLIMSEARCH_QUERY_HISTORY",p=$(Be,[]),fe=()=>{const{queryHistoryCount:t}=H;return{enabled:t>0,queryHistories:p,addQueryHistory:u=>{p.value=Array.from(new Set([u,...p.value.slice(0,t-1)]))},removeQueryHistory:u=>{p.value=[...p.value.slice(0,u),...p.value.slice(u+1)]}}},w=t=>Le[t.id]+("anchor"in t?`#${t.anchor}`:""),He="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:T}=H,A=$(He,[]),Me=()=>({enabled:T>0,resultHistories:A,addResultHistory:o=>{{const u={link:w(o),display:o.display};"header"in o&&(u.header=o.header),A.value=[u,...A.value.slice(0,T-1)]}},removeResultHistory:o=>{A.value=[...A.value.slice(0,o),...A.value.slice(o+1)]}}),De=t=>{const{page:o,routeLocale:u}=de(),M=ve(),r=b(0),g=f(()=>r.value>0),d=he([]);return me(()=>{const{search:D,terminate:m}=Ee(),L=pe(E=>{const{resultsFilter:k=l=>l,querySplitter:y,suggestionsFilter:Q,...i}=M.value;E?(r.value+=1,D(E,u.value,i).then(l=>k(l,E,u.value,o.value)).then(l=>{r.value-=1,d.value=l}).catch(l=>{console.warn(l),r.value-=1,r.value||(d.value=[])})):d.value=[]},H.searchDelay-H.suggestDelay,{maxWait:5e3});ye([t,u],([E])=>L(E.join(" "))),Ae(()=>{m()})}),{isSearching:g,results:d}};var Ce=K({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(t,{emit:o}){const u=W(),M=X(),r=Z(ee),{addQueryHistory:g,queryHistories:d,removeQueryHistory:D}=fe(),{resultHistories:m,addResultHistory:L,removeResultHistory:E}=Me(),k=ae(t,"queries"),{results:y,isSearching:Q}=De(k),i=se({isQuery:!0,index:0}),l=b(0),v=b(0),S=f(()=>d.value.length>0||m.value.length>0),C=f(()=>y.value.length>0),R=f(()=>y.value[l.value]||null),P=()=>{const{isQuery:a,index:s}=i;s===0?(i.isQuery=!a,i.index=a?m.value.length-1:d.value.length-1):i.index=s-1},V=()=>{const{isQuery:a,index:s}=i;s===(a?d.value.length-1:m.value.length-1)?(i.isQuery=!a,i.index=0):i.index=s+1},j=()=>{l.value=l.value>0?l.value-1:y.value.length-1,v.value=R.value.contents.length-1},O=()=>{l.value=l.value<y.value.length-1?l.value+1:0,v.value=0},U=()=>{v.value<R.value.contents.length-1?v.value+=1:O()},Y=()=>{v.value>0?v.value-=1:j()},x=a=>a.map(s=>ge(s)?s:e(s[0],s[1])),G=a=>{if(a.type==="customField"){const s=ce[a.index]||"$content",[h,c=""]=ne(s)?s[M.value].split("$content"):s.split("$content");return a.display.map(n=>e("div",x([h,...n,c])))}return a.display.map(s=>e("div",x(s)))},B=()=>{l.value=0,v.value=0,o("updateQuery",""),o("close")},N=()=>e("div",{class:"slimsearch-records"},e("div",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},r.value.queryHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},d.value.map((a,s)=>{const h=i.isQuery&&i.index===s;return e("li",{class:["slimsearch-record-matches",{active:h}],role:"option","aria-selected":h,onClick:()=>{o("updateQuery",a)}},e("div",[e(I,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},a),e("button",{type:"button",class:"slimsearch-remove-icon",title:r.value.remove,"aria-label":r.value.remove,innerHTML:_,onClick:c=>{c.preventDefault(),c.stopPropagation(),D(s)}})]))}))])),z=()=>e("ul",{class:"slimsearch-records"},e("li",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},r.value.resultHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},m.value.map((a,s)=>{const h=!i.isQuery&&i.index===s;return e("li",{class:["slimsearch-record-matches",{active:h}],role:"option","aria-selected":h},e(F,{to:a.link,onClick:()=>{B()}},()=>[e(I,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[a.header?e("div",{class:"slimsearch-record-content-header"},a.header):null,e("div",a.display.map(c=>x(c)).flat())]),e("button",{type:"button",class:"slimsearch-remove-icon",title:r.value.remove,"aria-label":r.value.remove,innerHTML:_,onClick:c=>{c.preventDefault(),c.stopPropagation(),E(s)}})]))}))]));return le("keydown",a=>{if(t.isFocusing){if(C.value){if(a.key==="ArrowUp")Y();else if(a.key==="ArrowDown")U();else if(a.key==="Enter"){const s=R.value.contents[v.value];g(t.queries.join(" ")),L(s),u.push(w(s)),B()}}else if(a.key==="ArrowUp")P();else if(a.key==="ArrowDown")V();else if(a.key==="Enter"){const{index:s}=i;i.isQuery?(a.preventDefault(),o("updateQuery",d.value[s])):(u.push(m.value[s].link),B())}}}),te([l,v],()=>{var a;(a=document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active"))==null||a.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:t.queries.length?!C.value:!S.value}]},t.queries.length?Q.value?e(re,{hint:r.value.searching}):C.value?e("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},y.value.map(({title:a,contents:s},h)=>{const c=l.value===h;return e("div",{class:["slimsearch-record",{active:c}],role:"group","aria-selected":c},[e("div",{class:"slimsearch-record-title"},a||r.value.defaultTitle),e("ul",{class:"slimsearch-record-contents"},s.map((n,J)=>{const q=c&&v.value===J;return e("li",{class:["slimsearch-record-matches",{active:q}],role:"option","aria-selected":q},e(F,{to:w(n),onClick:()=>{g(t.queries.join(" ")),L(n),B()}},()=>[n.type==="text"?null:e(n.type==="title"?ie:n.type==="heading"?oe:ue,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[n.type==="text"&&n.header?e("div",{class:"slimsearch-record-content-header"},n.header):null,e("div",G(n))])]))}))])})):r.value.emptyResult:S.value?[N(),z()]:r.value.emptyHistory)}});export{Ce as default};
