import{g as K,u as W,h as X,i as Z,j as ee,t as ae,k as te,l as S,m as D,n as e,p as se,w as le,s as re,R as q,q as oe,v as ie,x as ce,y as ne,z as ue,A as _,B as I,C as Ee,D as de,E as Ae,F as ve,L as he,G as me,H as Be,I as ye,J as V,K as pe,M as f}from"./app-DzuoLYdt.js";const ge=["/","/intro.html","/3DVL/GREAT.html","/3DVL/Grounding_3D_Object_Affordance.html","/3DVL/LASO.html","/3DVL/","/3DVL/%E7%AE%80%E6%9E%90PointNet__.html","/3DVL/%E7%AE%80%E6%9E%90PointNet.html","/LLM/","/LLM/%E5%9B%BE%E8%A7%A3BERT.html","/LLM/%E5%9B%BE%E8%A7%A3Transformer.html","/LLM/%E7%AE%80%E6%9E%90LLaMA.html","/MMLLM/InternVL-1.0.html","/MMLLM/","/MMLLM/%E5%A4%9A%E6%A8%A1%E6%80%81%E5%AF%B9%E9%BD%90%E4%B8%8E%E8%9E%8D%E5%90%88%E6%8A%80%E6%9C%AF%E5%8F%91%E5%B1%95%E7%BB%BC%E8%BF%B0.html","/MMLLM/%E5%A4%9A%E6%A8%A1%E6%80%81%E6%A8%A1%E5%9E%8BCLIP%E5%8E%9F%E7%90%86%E4%B8%8E%E5%9B%BE%E7%89%87%E5%88%86%E7%B1%BB%EF%BC%8C%E6%96%87%E5%AD%97%E6%90%9C%E7%B4%A2%E5%9B%BE%E5%83%8F%E5%AE%9E%E6%88%98%E6%BC%94%E7%BB%83.html","/MMLLM/%E5%BA%96%E4%B8%81%E8%A7%A3%E7%89%9BBLIP2.html","/MMLLM/%E5%BA%96%E4%B8%81%E8%A7%A3%E7%89%9BVIT.html","/open_course/","/open_projects/","/open_projects/%E5%9F%BA%E4%BA%8ETransformer%E5%AE%9E%E7%8E%B0%E7%9A%84%E8%81%8A%E5%A4%A9%E6%9C%BA%E5%99%A8%E4%BA%BA.html","/other/Attention%E8%BF%90%E7%AE%97%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%BB%B4%E5%BA%A6%E5%8F%98%E6%8D%A2%E7%9A%84%E7%90%86%E8%A7%A3.html","/other/","/other/conda%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86.html","/other/%E5%B8%B8%E7%94%A8%E8%AF%84%E4%BC%B0%E6%8C%87%E6%A0%87.html","/other/%E8%AF%AD%E4%B9%89%E5%88%86%E5%89%B2%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84%E6%8D%9F%E5%A4%B1%E5%87%BD%E6%95%B0.html","/open_course/CS224n-%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E5%A4%84%E7%90%86/","/open_course/CS231n-%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/","/404.html","/category/","/category/3d-vl/","/category/3d-affordance/","/category/nlp/","/category/%E5%A4%9A%E6%A8%A1%E6%80%81/","/category/mmllm/","/category/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE/","/category/attention/","/category/tools/","/category/metric/","/category/%E6%8D%9F%E5%A4%B1%E5%87%BD%E6%95%B0/","/tag/","/tag/3d-vl/","/tag/3d-affordance/","/tag/%E7%BC%96%E8%BE%91%E4%B8%AD/","/tag/%E6%8C%82%E8%B5%B7%E4%B8%AD/","/tag/%E5%B7%B2%E5%8F%91%E5%B8%83/","/tag/point-cloud/","/tag/%E9%A2%84%E8%AE%AD%E7%BB%83%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/","/tag/%E5%A4%9A%E6%A8%A1%E6%80%81/","/article/","/star/","/timeline/"],Le="SLIMSEARCH_QUERY_HISTORY",B=V(Le,[]),De=()=>{const{queryHistoryCount:l}=f;return{enabled:l>0,queryHistories:B,addQueryHistory:c=>{B.value=Array.from(new Set([c,...B.value.slice(0,l-1)]))},removeQueryHistory:c=>{B.value=[...B.value.slice(0,c),...B.value.slice(c+1)]}}},x=l=>ge[l.id]+("anchor"in l?`#${l.anchor}`:""),fe="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:T}=f,y=V(fe,[]),Ce=()=>({enabled:T>0,resultHistories:y,addResultHistory:i=>{{const c={link:x(i),display:i.display};"header"in i&&(c.header=i.header),y.value=[c,...y.value.slice(0,T-1)]}},removeResultHistory:i=>{y.value=[...y.value.slice(0,i),...y.value.slice(i+1)]}}),Fe=l=>{const{page:i,routeLocale:c}=Ee(),C=de(),r=S(0),p=D(()=>r.value>0),E=Ae([]);return ve(()=>{const{search:F,terminate:v}=he(),g=Be(h=>{const{resultsFilter:M=s=>s,querySplitter:m,suggestionsFilter:b,...o}=C.value;h?(r.value+=1,F(h,c.value,o).then(s=>M(s,h,c.value,i.value)).then(s=>{r.value-=1,E.value=s}).catch(s=>{console.warn(s),r.value-=1,r.value||(E.value=[])})):E.value=[]},f.searchDelay-f.suggestDelay,{maxWait:5e3});me([l,c],([h])=>g(h.join(" "))),ye(()=>{v()})}),{isSearching:p,results:E}};var He=K({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(l,{emit:i}){const c=W(),C=X(),r=Z(ee),{addQueryHistory:p,queryHistories:E,removeQueryHistory:F}=De(),{resultHistories:v,addResultHistory:g,removeResultHistory:h}=Ce(),M=ae(l,"queries"),{results:m,isSearching:b}=Fe(M),o=te({isQuery:!0,index:0}),s=S(0),d=S(0),w=D(()=>E.value.length>0||v.value.length>0),H=D(()=>m.value.length>0),R=D(()=>m.value[s.value]||null),$=()=>{const{isQuery:a,index:t}=o;t===0?(o.isQuery=!a,o.index=a?v.value.length-1:E.value.length-1):o.index=t-1},j=()=>{const{isQuery:a,index:t}=o;t===(a?E.value.length-1:v.value.length-1)?(o.isQuery=!a,o.index=0):o.index=t+1},P=()=>{s.value=s.value>0?s.value-1:m.value.length-1,d.value=R.value.contents.length-1},O=()=>{s.value=s.value<m.value.length-1?s.value+1:0,d.value=0},U=()=>{d.value<R.value.contents.length-1?d.value+=1:O()},G=()=>{d.value>0?d.value-=1:P()},k=a=>a.map(t=>pe(t)?t:e(t[0],t[1])),Y=a=>{if(a.type==="customField"){const t=ne[a.index]||"$content",[A,n=""]=ue(t)?t[C.value].split("$content"):t.split("$content");return a.display.map(u=>e("div",k([A,...u,n])))}return a.display.map(t=>e("div",k(t)))},L=()=>{s.value=0,d.value=0,i("updateQuery",""),i("close")},N=()=>e("div",{class:"slimsearch-records"},e("div",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},r.value.queryHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},E.value.map((a,t)=>{const A=o.isQuery&&o.index===t;return e("li",{class:["slimsearch-record-matches",{active:A}],role:"option","aria-selected":A,onClick:()=>{i("updateQuery",a)}},e("div",[e(_,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},a),e("button",{type:"button",class:"slimsearch-remove-icon",title:r.value.remove,"aria-label":r.value.remove,innerHTML:I,onClick:n=>{n.preventDefault(),n.stopPropagation(),F(t)}})]))}))])),z=()=>e("ul",{class:"slimsearch-records"},e("li",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},r.value.resultHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},v.value.map((a,t)=>{const A=!o.isQuery&&o.index===t;return e("li",{class:["slimsearch-record-matches",{active:A}],role:"option","aria-selected":A},e(q,{to:a.link,onClick:()=>{L()}},()=>[e(_,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[a.header?e("div",{class:"slimsearch-record-content-header"},a.header):null,e("div",a.display.map(n=>k(n)).flat())]),e("button",{type:"button",class:"slimsearch-remove-icon",title:r.value.remove,"aria-label":r.value.remove,innerHTML:I,onClick:n=>{n.preventDefault(),n.stopPropagation(),h(t)}})]))}))]));return se("keydown",a=>{if(l.isFocusing){if(H.value){if(a.key==="ArrowUp")G();else if(a.key==="ArrowDown")U();else if(a.key==="Enter"){const t=R.value.contents[d.value];p(l.queries.join(" ")),g(t),c.push(x(t)),L()}}else if(a.key==="ArrowUp")$();else if(a.key==="ArrowDown")j();else if(a.key==="Enter"){const{index:t}=o;o.isQuery?(a.preventDefault(),i("updateQuery",E.value[t])):(c.push(v.value[t].link),L())}}}),le([s,d],()=>{var a;(a=document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active"))==null||a.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:l.queries.length?!H.value:!w.value}]},l.queries.length?b.value?e(re,{hint:r.value.searching}):H.value?e("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},m.value.map(({title:a,contents:t},A)=>{const n=s.value===A;return e("div",{class:["slimsearch-record",{active:n}],role:"group","aria-selected":n},[e("div",{class:"slimsearch-record-title"},a||r.value.defaultTitle),e("ul",{class:"slimsearch-record-contents"},t.map((u,J)=>{const Q=n&&d.value===J;return e("li",{class:["slimsearch-record-matches",{active:Q}],role:"option","aria-selected":Q},e(q,{to:x(u),onClick:()=>{p(l.queries.join(" ")),g(u),L()}},()=>[u.type==="text"?null:e(u.type==="title"?oe:u.type==="heading"?ie:ce,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[u.type==="text"&&u.header?e("div",{class:"slimsearch-record-content-header"},u.header):null,e("div",Y(u))])]))}))])})):r.value.emptyResult:w.value?[N(),z()]:r.value.emptyHistory)}});export{He as default};
